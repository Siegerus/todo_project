(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function d(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=d(s);fetch(s.href,n)}})();window.addEventListener("DOMContentLoaded",()=>{S(),A()});function S(){let f=document.forms[0],o=document.querySelector("ul"),d=document.querySelector(".todo__set"),i=!1;document.addEventListener("mousedown",t=>{t.detail>1&&t.preventDefault()});function s(){window.addEventListener("load",t=>{for(let e=0;e<localStorage.length;e++)g(t,localStorage.getItem(e))})}s();function n(t){t?o.previousElementSibling.textContent="List is empty...":o.previousElementSibling.textContent=""}n(!0);function a(t,e,l){i=!1,confirm(t,"")&&(Array.isArray(e)?(l||e.forEach(c=>{c.classList.contains("list__item_reject")||(c.remove(),localStorage.clear(),m(o.querySelectorAll(".list__text")))}),l&&e.forEach(c=>{c.classList.contains("list__item_done")&&(c.remove(),localStorage.clear(),m(o.querySelectorAll(".list__text")))})):e.remove(),o.parentElement.style.minHeight=0,o.children.length==0&&n(!0))}function y(t){let e=`
            <span class="list__text">${t}</span>  
            <div class="">
                <span class="check list__target" >✓</span>
                <span class="denied list__target" >✕</span> 
                <span class="reject list__target" >reject</span> 
            </div>`,l=document.createElement("li");return l.classList.add("list__item"),l.classList.add("target-item"),l.insertAdjacentHTML("afterBegin",e),n(!1),o.parentElement.style.minHeight=o.parentElement.offsetHeight+l.offsetHeight+"px",o.append(l),l}function m(t){t.forEach((e,l)=>localStorage.setItem(l,e.textContent))}function p(t,e){i=!0;let l=document.createElement("textarea");l.classList.add("list__edit"),t.insertAdjacentHTML("afterend",'<button type="button" class="button  list__edit-button">Edit</button>'),l.value=t.innerHTML,t.replaceWith(l),l.focus();let r=o.querySelectorAll("button");function c(){l.replaceWith(t),t.textContent=l.value,r.forEach(u=>{u.removeEventListener("click",_),u.remove(),i=!1})}function _(u){localStorage.setItem(u,l.value),c()}r&&r.forEach(u=>u.addEventListener("click",()=>_(e)))}function h(t){let e=t.querySelectorAll(".check"),l=t.querySelectorAll(".reject");t.classList.contains("list__item_done")?(t.classList.remove("list__item_reject"),e.forEach(r=>r.style.color="lightgreen"),l.forEach(r=>r.style.color="")):e.forEach(r=>r.style.color="")}function L(t){let e=t.querySelectorAll(".check"),l=t.querySelectorAll(".reject");t.classList.contains("list__item_reject")?(t.classList.remove("list__item_done"),l.forEach(r=>r.style.color="red"),e.forEach(r=>r.style.color="")):l.forEach(r=>r.style.color="")}function E(t,e,l){if(i)return;let r=t.target.closest(".list__target");if(r){if(r&&r.matches(".check")){if(e.classList.contains("list__item_reject"))return;e.classList.toggle("list__item_done"),h(e)}if(r&&r.matches(".reject")&&(e.classList.toggle("list__item_reject"),L(e)),r&&r.matches(".denied")){if(e.classList.contains("list__item_reject"))return;a("Delete this note?",e),localStorage.clear(),m(o.querySelectorAll(".list__text"))}}}function g(t,e){t.preventDefault(),e&&y(e);let l=document.querySelectorAll(".list__item"),r=document.querySelectorAll(".list__text");l.forEach((c,_)=>{c.onclick=u=>E(u,c)}),f.reset(),r.forEach((c,_)=>{localStorage.setItem(_,c.textContent),c.onclick=()=>{i||p(c,_)}})}function v(t){let e=t.target.closest(".button");if(e){if(e&&e.matches(".check-all")&&Array.from(o.children).forEach(l=>{l.classList.contains("list__item_reject")||(l.classList.add("list__item_done"),h(l))}),e&&e.matches(".remove-all")){let l=!0;for(let r of o.children)r.classList.contains("list__item_reject")||(l=!1);o.children.length>0&&!l&&a("Delete all notes?",Array.from(o.children))}if(e&&e.matches(".remove-all-checked")){let l=!0,r=!1;for(let c of o.children)c.classList.contains("list__item_done")&&(r=!0);r&&a("Delete all completed notes?",Array.from(o.children),l)}}}f.addEventListener("submit",t=>g(t,f.note.value)),d.addEventListener("click",v)}function A(){let f=new Date,o=document.querySelector(".footer__date");function d(i){let s=i.getDate()<10?"0"+i.getDate():i.getDate(),n=i.getMonth()<10?"0"+(i.getMonth()+1):i.getMonth()+1,a=i.getFullYear();return{day:s,month:n,year:a}}o.innerHTML=`${d(f).day} . ${d(f).month} . ${d(f).year}`}
