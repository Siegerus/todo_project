(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))c(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function l(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(i){if(i.ep)return;i.ep=!0;const s=l(i);fetch(i.href,s)}})();window.addEventListener("DOMContentLoaded",()=>{j(),A(),x(),w()});function x(){let u=document.forms[0],o=document.querySelector("ul"),l=document.querySelector(".todo__set"),c=!1;document.addEventListener("mousedown",e=>{e.detail>1&&e.preventDefault()});function i(){window.addEventListener("load",e=>{for(let t=0;t<localStorage.length;t++)L(localStorage.getItem(t))})}i();function s(e){e?o.previousElementSibling.textContent="List is empty...":o.previousElementSibling.textContent=""}s(!0);function a(e,t,r){c=!1,confirm(e,"")&&(Array.isArray(t)?(r||t.forEach(f=>{f.classList.contains("list__item_reject")||(f.remove(),localStorage.clear(),_(o.querySelectorAll(".list__text")))}),r&&t.forEach(f=>{f.classList.contains("list__item_done")&&(f.remove(),localStorage.clear(),_(o.querySelectorAll(".list__text")))})):t.remove(),o.parentElement.style.minHeight=0,o.children.length==0&&s(!0))}function g(e){let t=`
            <span class="list__text">${e}</span>  
            <div class="">
                <span class="check list__target" >✓</span>
                <span class="denied list__target" >✕</span> 
                <span class="reject list__target" >reject</span> 
            </div>`,r=document.createElement("li");return r.classList.add("list__item"),r.classList.add("target-item"),r.insertAdjacentHTML("afterBegin",t),s(!1),o.parentElement.style.minHeight=o.parentElement.offsetHeight+r.offsetHeight+"px",o.append(r),r}function _(e){e.forEach((t,r)=>localStorage.setItem(r,t.textContent))}function y(e,t){c=!0;let r=document.createElement("textarea");r.classList.add("list__edit"),e.insertAdjacentHTML("afterend",'<button type="button" class="button  list__edit-button">Edit</button>'),r.value=e.innerHTML,e.replaceWith(r),r.focus();let n=o.querySelectorAll("button");function f(){r.replaceWith(e),e.textContent=r.value,n.forEach(h=>{h.removeEventListener("click",p),h.remove(),c=!1})}function p(h){localStorage.setItem(h,r.value),f()}n&&n.forEach(h=>h.addEventListener("click",()=>p(t)))}function d(e){let t=e.querySelectorAll(".check"),r=e.querySelectorAll(".reject");e.classList.contains("list__item_done")?(e.classList.remove("list__item_reject"),t.forEach(n=>n.style.color="lightgreen"),r.forEach(n=>n.style.color="")):t.forEach(n=>n.style.color="")}function m(e){let t=e.querySelectorAll(".check"),r=e.querySelectorAll(".reject");e.classList.contains("list__item_reject")?(e.classList.remove("list__item_done"),r.forEach(n=>n.style.color="red"),t.forEach(n=>n.style.color="")):r.forEach(n=>n.style.color="")}function E(e,t,r){if(c)return;let n=e.target.closest(".list__target");if(n){if(n&&n.matches(".check")){if(t.classList.contains("list__item_reject"))return;t.classList.toggle("list__item_done"),d(t)}if(n&&n.matches(".reject")&&(t.classList.toggle("list__item_reject"),m(t)),n&&n.matches(".denied")){if(t.classList.contains("list__item_reject"))return;a("Delete this note?",t),localStorage.clear(),_(o.querySelectorAll(".list__text"))}}}function L(e){e&&g(e);let t=document.querySelectorAll(".list__item"),r=document.querySelectorAll(".list__text");t.forEach((n,f)=>{n.onclick=p=>E(p,n)}),u.reset(),r.forEach((n,f)=>{localStorage.setItem(f,n.textContent),n.onclick=()=>{c||y(n,f)}})}function S(e){e.preventDefault()}function v(e){let t=e.target.closest(".button");if(t){if(t&&t.matches(".check-all")&&Array.from(o.children).forEach(r=>{r.classList.contains("list__item_reject")||(r.classList.add("list__item_done"),d(r))}),t&&t.matches(".remove-all")){let r=!0;for(let n of o.children)n.classList.contains("list__item_reject")||(r=!1);o.children.length>0&&!r&&a("Delete all notes?",Array.from(o.children))}if(t&&t.matches(".remove-all-checked")){let r=!0,n=!1;for(let f of o.children)f.classList.contains("list__item_done")&&(n=!0);n&&a("Delete all completed notes?",Array.from(o.children),r)}}}u.addEventListener("submit",e=>{S(e),L(u.note.value)}),l.addEventListener("click",v)}function w(){let u=new Date,o=document.querySelector(".footer__date");function l(c){let i=c.getDate()<10?"0"+c.getDate():c.getDate(),s=c.getMonth()<10?"0"+(c.getMonth()+1):c.getMonth()+1,a=c.getFullYear();return{day:i,month:s,year:a}}o.innerHTML=`${l(u).day} . ${l(u).month} . ${l(u).year}`}function j(){function u(){let l=new Date,c=l.getHours()<10?"0"+l.getHours():l.getHours(),i=l.getMinutes()<10?"0"+l.getMinutes():l.getMinutes(),s=l.getSeconds()<10?"0"+l.getSeconds():l.getSeconds();return{hours:c,minutes:i,seconds:s}}function o(){let l=document.querySelector(".timer"),c=l.querySelector(".timer__hours"),i=l.querySelector(".timer__minutes"),s=l.querySelector(".timer__seconds");function a(){c.innerHTML=u().hours,i.innerHTML=u().minutes,s.innerHTML=u().seconds}a(),setInterval(a,1e3)}o()}function A(){const u="3313eade200c1be66cd128f80caabf6e";let o=document.querySelector(".whether"),l=!1;function c(s,a,g){o.firstElementChild.firstElementChild.innerHTML=s,o.firstElementChild.firstElementChild.nextElementSibling.src=a,o.firstElementChild.nextElementSibling.innerHTML=g}l||c("Loading...","/img/loading-spinner.gif","Loading...");function i(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(s=>{let{latitude:a,longitude:g}=s.coords,_=`https://api.openweathermap.org/data/2.5/weather?lat=${a}&lon=${g}&appid=${u}`;async function y(d){let m=await fetch(d),E=await m.json();if(console.log(m),m.ok)return E;throw new Error("Response error! "+m.status)}y(_).then(d=>{l=!0;let m=Math.round(d.main.temp-273.15)+" °C";l&&c(d.name,`https://openweathermap.org/img/wn/${d.weather[0].icon}@2x.png`,m)}).catch(d=>{c("Error","","Error"),console.error(d.message)})})}i()}
